{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Poly\\\\Projects\\\\WebSpider\\\\Frontend\\\\src\\\\components\\\\Common\\\\SideMenu\\\\SideMenu.js\",\n    _s = $RefreshSig$();\n\nimport { useState } from 'react';\nimport { crawlPage } from '../../../util/http';\n/* Main form */\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst SideMenu = ({\n  resultCallback,\n  pageCallback,\n  isLink\n}) => {\n  _s();\n\n  const [status, setStatus] = useState(\"Submit\");\n  const [state, setState] = useState({\n    ui: {\n      submit: false\n    },\n    pages: []\n  });\n  /* submit handler */\n\n  const handleSubmit = async e => {\n    const {\n      url,\n      maxDepth,\n      maxPages\n    } = e.target.elements;\n    const options = {\n      url,\n      maxDepth,\n      maxPages,\n      pages: []\n    };\n    console.log(options);\n    const result = await crawlPage({\n      options\n    });\n    console.log(result);\n  };\n  /* crawl page by page */\n\n\n  const getPage = async e => {\n    // clear ui pages table\n    resultCallback({\n      status: 'clear',\n      data: []\n    }); // lock submit\n\n    setState({ ...state,\n      ui: { ...state.ui,\n        submit: false\n      }\n    });\n    const {\n      url,\n      maxDepth,\n      maxPages\n    } = e.target.elements; // set data\n\n    let opt = {\n      url: url.value,\n      maxDepth: maxDepth.value,\n      maxPages: maxPages.value,\n      pages: [],\n      toLook: []\n    };\n    let pageIndex = 1; // update ui button text\n\n    setStatus(\"Loading page \" + pageIndex + \"...\"); // post data to api \n\n    do {\n      let response = await fetch(\"http://localhost:5000/api/crawl_page\", {\n        method: 'POST',\n        headers: {\n          \"Content-Type\": \"application/json;charset=utf-8\"\n        },\n        body: JSON.stringify(opt)\n      }); // wait for api response\n\n      let result = await response.json(); // set new data\n\n      opt.url = result.data.url;\n      opt.toLook = [...result.data.toLook];\n      opt.pages = [...result.data.pages]; // check for stop condition\n\n      if (!opt.toLook.length) {\n        break;\n      } // send results to callback\n\n\n      pageCallback(result);\n      pageIndex++; // update ui button text\n\n      setStatus(\"Loading page \" + pageIndex + \"...\");\n    } while (opt.toLook.length); // unlock submit\n\n\n    setState({ ...state,\n      ui: { ...state.ui,\n        submit: true\n      }\n    });\n    setStatus(\"Submit\");\n  };\n  /* crawl all pages */\n\n  /*\r\n  const getAll = async(e) => {\r\n      // clear ui pages table\r\n      resultCallback({status:'clear', data:[]});\r\n      // lock submit\r\n      setState(false);\r\n      const {url, maxDepth, maxPages} = e.target.elements;\r\n      let values = {\r\n          url: url.value,\r\n          maxDepth: maxDepth.value,\r\n          maxPages: maxPages.value\r\n      }\r\n      setStatus(\"Loading pages...\");\r\n      // post data to api \r\n      let response = await fetch(\"http://localhost:5000/api/crawl_all\", {\r\n          method: 'POST',\r\n          headers: {\r\n              \"Content-Type\": \"application/json;charset=utf-8\"\r\n          },\r\n          body: JSON.stringify(values)\r\n      });\r\n      // wait for api response\r\n      let result = await response.json();\r\n      // send results to callback\r\n      resultCallback(result);\r\n      // unlock submit\r\n      setState(true);\r\n      setStatus(\"Submit\");\r\n  }\r\n  */\n\n  /* validate http/s link */\n\n\n  const getValidation = url => {\n    setState({ ...state,\n      ui: { ...state.ui,\n        submit: isLink(url)\n      }\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"sideMenu\",\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row mt-1\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"url\",\n          children: \"URL\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"ex: https://www.google.com\",\n          id: \"url\",\n          onChange: e => getValidation(e.target.value),\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row mt-1\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"maxDepth\",\n          children: \"Max Depth\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          min: \"0\",\n          defaultValue: \"0\",\n          id: \"maxDepth\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row mt-1\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"maxPages\",\n          children: \"Max Pages\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          min: \"1\",\n          defaultValue: \"1\",\n          id: \"maxPages\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row mt-3\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          id: \"submit_btn\",\n          disabled: !state.ui.submit,\n          children: status\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 115,\n    columnNumber: 9\n  }, this);\n};\n\n_s(SideMenu, \"ibZNz9z+VH11ML6rWTKhmNd2nLY=\");\n\n_c = SideMenu;\nexport default SideMenu;\n\nvar _c;\n\n$RefreshReg$(_c, \"SideMenu\");","map":{"version":3,"sources":["C:/Users/Poly/Projects/WebSpider/Frontend/src/components/Common/SideMenu/SideMenu.js"],"names":["useState","crawlPage","SideMenu","resultCallback","pageCallback","isLink","status","setStatus","state","setState","ui","submit","pages","handleSubmit","e","url","maxDepth","maxPages","target","elements","options","console","log","result","getPage","data","opt","value","toLook","pageIndex","response","fetch","method","headers","body","JSON","stringify","json","length","getValidation"],"mappings":"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","sourcesContent":["import { useState } from 'react';\r\nimport { crawlPage } from '../../../util/http';\r\n\r\n/* Main form */\r\nconst SideMenu = ({ resultCallback, pageCallback, isLink })=> {\r\n    const [status, setStatus] = useState(\"Submit\")\r\n    const [state, setState] = useState({\r\n        ui: {\r\n            submit: false\r\n        },\r\n        pages:[]\r\n    })\r\n\r\n    /* submit handler */\r\n\tconst handleSubmit = async(e) => {\r\n        const { url, maxDepth, maxPages } = e.target.elements;\r\n        const options = {\r\n            url,\r\n            maxDepth,\r\n            maxPages,\r\n            pages:[]\r\n        }\r\n        console.log(options)\r\n        \r\n        const result = await crawlPage({ options })\r\n        console.log(result)\r\n            \r\n    }\r\n    \r\n    /* crawl page by page */\r\n    const getPage = async(e) => {\r\n        // clear ui pages table\r\n        resultCallback({status:'clear', data:[]});\r\n        // lock submit\r\n        setState({...state, ui:{...state.ui, submit:false}});\r\n        const {url, maxDepth, maxPages} = e.target.elements;\r\n        // set data\r\n        let opt = {\r\n            url: url.value,\r\n            maxDepth: maxDepth.value,\r\n            maxPages: maxPages.value,\r\n            pages: [],\r\n            toLook: []\r\n        }\r\n        let pageIndex = 1;\r\n        // update ui button text\r\n        setStatus(\"Loading page \"+ pageIndex + \"...\");\r\n        // post data to api \r\n        do {\r\n            let response = await fetch(\"http://localhost:5000/api/crawl_page\", {\r\n                method: 'POST',\r\n                headers: {\r\n                    \"Content-Type\": \"application/json;charset=utf-8\"\r\n                },\r\n                body: JSON.stringify(opt)\r\n            });\r\n            // wait for api response\r\n            let result = await response.json();\r\n            // set new data\r\n            opt.url = result.data.url;\r\n            opt.toLook = [...result.data.toLook];\r\n            opt.pages = [...result.data.pages];\r\n            // check for stop condition\r\n            if(!opt.toLook.length) {\r\n                break;\r\n            }\r\n            // send results to callback\r\n            pageCallback(result);\r\n            pageIndex++;\r\n            // update ui button text\r\n            setStatus(\"Loading page \"+ pageIndex +\"...\");\r\n        } while(opt.toLook.length);\r\n        // unlock submit\r\n        setState({...state, ui:{...state.ui, submit:true}});\r\n        setStatus(\"Submit\");\r\n    }\r\n\r\n    /* crawl all pages */\r\n    /*\r\n    const getAll = async(e) => {\r\n        // clear ui pages table\r\n        resultCallback({status:'clear', data:[]});\r\n        // lock submit\r\n        setState(false);\r\n        const {url, maxDepth, maxPages} = e.target.elements;\r\n        let values = {\r\n            url: url.value,\r\n            maxDepth: maxDepth.value,\r\n            maxPages: maxPages.value\r\n        }\r\n        setStatus(\"Loading pages...\");\r\n        // post data to api \r\n        let response = await fetch(\"http://localhost:5000/api/crawl_all\", {\r\n            method: 'POST',\r\n            headers: {\r\n                \"Content-Type\": \"application/json;charset=utf-8\"\r\n            },\r\n            body: JSON.stringify(values)\r\n        });\r\n        // wait for api response\r\n        let result = await response.json();\r\n        // send results to callback\r\n        resultCallback(result);\r\n        // unlock submit\r\n        setState(true);\r\n        setStatus(\"Submit\");\r\n    }\r\n    */\r\n    /* validate http/s link */\r\n    const getValidation = (url) => {\r\n        setState({...state, ui:{...state.ui, submit:isLink(url)}});\r\n  \t}\r\n\r\n    return (\r\n        <div className='sideMenu'>\r\n            <form onSubmit={handleSubmit}>\r\n                <div className=\"row mt-1\">\r\n                    <label htmlFor=\"url\">URL</label>\r\n                    <input type=\"text\" placeholder=\"ex: https://www.google.com\" id=\"url\" onChange={(e) => getValidation(e.target.value)} required/>\r\n                </div>\r\n                <div className=\"row mt-1\">\r\n                    <label htmlFor=\"maxDepth\">Max Depth</label>\r\n                    <input type=\"number\" min=\"0\" defaultValue=\"0\" id=\"maxDepth\" required/>\r\n                </div>\r\n                <div className=\"row mt-1\">\r\n                    <label htmlFor=\"maxPages\">Max Pages</label>\r\n                    <input type=\"number\" min=\"1\" defaultValue=\"1\" id=\"maxPages\"required/>\r\n                </div>\r\n                <div className=\"row mt-3\">\r\n                    <button type=\"submit\" id=\"submit_btn\" disabled={!state.ui.submit}>{status}</button>\r\n                </div>\r\n            </form>\r\n        </div>\r\n    )\r\n\t\r\n}\r\n\r\nexport default SideMenu;"]},"metadata":{},"sourceType":"module"}